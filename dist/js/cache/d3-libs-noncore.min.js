/*! etrends 13-02-2017 */
function albersUsaPr(){function a(a){var g=a[0],h=a[1];return b=null,c(g,h),b||(d(g,h),b)||(e(g,h),b)||(f(g,h),b),b}var b,c,d,e,f,g=1e-6,h=d3.geo.albers(),i=d3.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),j=d3.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),k=d3.geo.conicEqualArea().rotate([66,0]).center([0,18]).parallels([8,18]),l={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=h.scale(),c=h.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&e<.234&&d>=-.425&&d<-.214?i:e>=.166&&e<.234&&d>=-.214&&d<-.115?j:e>=.204&&e<.234&&d>=.32&&d<.38?k:h).invert(a)},a.stream=function(a){var b=h.stream(a),c=i.stream(a),d=j.stream(a),e=k.stream(a);return{point:function(a,f){b.point(a,f),c.point(a,f),d.point(a,f),e.point(a,f)},sphere:function(){b.sphere(),c.sphere(),d.sphere(),e.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart(),e.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd(),e.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart(),e.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd(),e.polygonEnd()}}},a.precision=function(b){return arguments.length?(h.precision(b),i.precision(b),j.precision(b),k.precision(b),a):h.precision()},a.scale=function(b){return arguments.length?(h.scale(b),i.scale(.35*b),j.scale(b),k.scale(b),a.translate(h.translate())):h.scale()},a.translate=function(b){if(!arguments.length)return h.translate();var m=h.scale(),n=+b[0],o=+b[1];return c=h.translate(b).clipExtent([[n-.455*m,o-.238*m],[n+.455*m,o+.238*m]]).stream(l).point,d=i.translate([n-.307*m,o+.201*m]).clipExtent([[n-.425*m+g,o+.12*m+g],[n-.214*m-g,o+.234*m-g]]).stream(l).point,e=j.translate([n-.205*m,o+.212*m]).clipExtent([[n-.214*m+g,o+.166*m+g],[n-.115*m-g,o+.234*m-g]]).stream(l).point,f=k.translate([n+.35*m,o+.224*m]).clipExtent([[n+.32*m,o+.204*m],[n+.38*m,o+.234*m]]).stream(l).point,a},a.scale(1070)}!function(a,b){"function"==typeof define&&define.amd?define(["d3"],b):"object"==typeof exports?(process.browser&&require("./d3.slider.css"),module.exports=b(require("d3"))):a.d3.slider=b(a.d3)}(this,function(a){return function(){"use strict";function b(b){b.each(function(){function b(b){"boolean"==typeof r&&(r=a.svg.axis().ticks(Math.round(l/100)).tickFormat(x).orient("horizontal"===q?"bottom":"right")),i=h.ticks?h.copy().range([0,l]):h.copy().rangePoints([0,l],.5),r.scale(i);var c=b.append("svg").classed("d3-slider-axis d3-slider-axis-"+r.orient(),!0).on("click",A),d=c.append("g");"horizontal"===q?(c.style("margin-left",-s+"px"),c.attr({width:l+2*s,height:s}),"top"===r.orient()?(c.style("top",-s+"px"),d.attr("transform","translate("+s+","+s+")")):d.attr("transform","translate("+s+",0)")):(c.style("top",-s+"px"),c.attr({width:s,height:l+2*s}),"left"===r.orient()?(c.style("left",-s+"px"),d.attr("transform","translate("+s+","+s+")")):d.attr("transform","translate(0,"+s+")")),d.call(r)}function o(){if("array"!=f(g)){var b=Math.max(0,Math.min(l,a.event.offsetX||a.event.layerX));c(h.invert?d(h.invert(b/l)):e(b/l))}}function p(){if("array"!=f(g)){var b=l-Math.max(0,Math.min(l,a.event.offsetY||a.event.layerY));c(h.invert?d(h.invert(b/l)):e(b/l))}}function u(){"handle-one"===a.event.sourceEvent.target.id?t=1:"handle-two"==a.event.sourceEvent.target.id&&(t=2);var b=Math.max(0,Math.min(l,a.event.x));c(h.invert?d(h.invert(b/l)):e(b/l))}function z(){"handle-one"===a.event.sourceEvent.target.id?t=1:"handle-two"==a.event.sourceEvent.target.id&&(t=2);var b=l-Math.max(0,Math.min(l,a.event.y));c(h.invert?d(h.invert(b/l)):e(b/l))}function A(){a.event.stopPropagation()}h||(h=a.scale.linear().domain([m,n])),g=g||h.domain()[0];var B=a.select(this).classed("d3-slider d3-slider-"+q,!0),C=a.behavior.drag();if(C.on("dragend",function(){v.slideend(a.event,g)}),"array"==f(g)&&2==g.length?(j=B.append("a").classed("d3-slider-handle",!0).attr("xlink:href","#").attr("id","handle-one").on("click",A).call(C),y=B.append("a").classed("d3-slider-handle",!0).attr("id","handle-two").attr("xlink:href","#").on("click",A).call(C)):j=B.append("a").classed("d3-slider-handle",!0).attr("xlink:href","#").attr("id","handle-one").on("click",A).call(C),"horizontal"===q){if(B.on("click",o),"array"==f(g)&&2==g.length){k=a.select(this).append("div").classed("d3-slider-range",!0),j.style("left",w(h(g[0]))),k.style("left",w(h(g[0]))),C.on("drag",u);var D=100-parseFloat(w(h(g[1])));y.style("left",w(h(g[1]))),k.style("right",D+"%"),C.on("drag",u)}else j.style("left",w(h(g))),C.on("drag",u);l=parseInt(B.style("width"),10)}else{if(B.on("click",p),C.on("drag",z),"array"==f(g)&&2==g.length){k=a.select(this).append("div").classed("d3-slider-range-vertical",!0),j.style("bottom",w(h(g[0]))),k.style("bottom",w(h(g[0]))),C.on("drag",z);var E=100-parseFloat(w(h(g[1])));y.style("bottom",w(h(g[1]))),k.style("top",E+"%"),C.on("drag",z)}else j.style("bottom",w(h(g))),C.on("drag",z);l=parseInt(B.style("height"),10)}r&&b(B)})}function c(b){var c="array"==f(g)&&2==g.length?g[t-1]:g,e=w(h(d(c))),i=w(h(d(b))),l="horizontal"===q?"left":"bottom";if(e!==i){if("array"==f(g)&&2==g.length?(g[t-1]=b,a.event&&v.slide(a.event,g)):a.event&&v.slide(a.event.sourceEvent||a.event,g=b),g[0]>=g[1])return;if(1===t)"array"==f(g)&&2==g.length&&("left"===l?k.style("left",i):k.style("bottom",i)),p?j.transition().styleTween(l,function(){return a.interpolate(e,i)}).duration("number"==typeof p?p:250):j.style(l,i);else{var m=100-parseFloat(i),n=100-parseFloat(i);"left"===l?k.style("right",m+"%"):k.style("top",n+"%"),p?y.transition().styleTween(l,function(){return a.interpolate(e,i)}).duration("number"==typeof p?p:250):y.style(l,i)}}}function d(a){if(a===h.domain()[0]||a===h.domain()[1])return a;var b=a;if(u)b=e(h(a));else{var c=(a-h.domain()[0])%o;b=a-c,2*Math.abs(c)>=o&&(b+=c>0?o:-o)}return b}function e(a){var b=h.ticks?h.ticks():h.domain(),c=b.map(function(b){return a-h(b)}),d=-1,e=0,f=h.ticks?h.range()[1]:h.rangeExtent()[1];do d++,Math.abs(c[d])<f&&(f=Math.abs(c[d]),e=d);while(c[d]>0&&d<c.length-1);return b[e]}function f(a){return{}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}var g,h,i,j,k,l,m=0,n=100,o=.01,p=!0,q="horizontal",r=!1,s=50,t=1,u=!1,v=a.dispatch("slide","slideend"),w=a.format(".2%"),x=a.format(".0"),y=null;return b.min=function(a){return arguments.length?(m=a,b):m},b.max=function(a){return arguments.length?(n=a,b):n},b.step=function(a){return arguments.length?(o=a,b):o},b.animate=function(a){return arguments.length?(p=a,b):p},b.orientation=function(a){return arguments.length?(q=a,b):q},b.axis=function(a){return arguments.length?(r=a,b):r},b.margin=function(a){return arguments.length?(s=a,b):s},b.value=function(a){return arguments.length?(g&&c(d(a)),g=a,b):g},b.snap=function(a){return arguments.length?(u=a,b):u},b.scale=function(a){return arguments.length?(h=a,b):h},a.rebind(b,v,"on"),b}}),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("./legend");b.exports=function(){function a(a){var v=d.d3_calcType(c,t,j,k,o,r),w=a.selectAll("g").data([c]);w.enter().append("g").attr("class",l+"legendCells");var x=w.selectAll("."+l+"cell").data(v.data),y=x.enter().append("g",".cell").attr("class",l+"cell").style("opacity",1e-6);shapeEnter=y.append(e).attr("class",l+"swatch"),shapes=x.select("g."+l+"cell "+e),d.d3_addEvents(y,u),x.exit().transition().style("opacity",0).remove(),d.d3_drawShapes(e,shapes,g,f,h,b),d.d3_addText(w,y,v.labels,l);var z=x.select("text"),A=shapes[0].map(function(a){return a.getBBox()});m?shapes.attr("class",function(a){return l+"swatch "+v.feature(a)}):"line"==e?shapes.style("stroke",v.feature):shapes.style("fill",v.feature);var B,C,D="start"==q?0:"middle"==q?.5:1;"vertical"===s?(B=function(a,b){return"translate(0, "+b*(A[b].height+i)+")"},C=function(a,b){return"translate("+(A[b].width+A[b].x+p)+","+(A[b].y+A[b].height/2+5)+")"}):"horizontal"===s&&(B=function(a,b){return"translate("+b*(A[b].width+i)+",0)"},C=function(a,b){return"translate("+(A[b].width*D+A[b].x)+","+(A[b].height+A[b].y+p+8)+")"}),d.d3_placement(s,x,B,z,C,q),d.d3_title(a,w,n,l),x.transition().style("opacity",1)}var b,c=d3.scale.linear(),e="rect",f=15,g=15,h=10,i=2,j=[5],k=[],l="",m=!1,n="",o=d3.format(".01f"),p=10,q="middle",r="to",s="vertical",t=!1,u=d3.dispatch("cellover","cellout","cellclick");return a.scale=function(b){return arguments.length?(c=b,a):c},a.cells=function(b){return arguments.length?((b.length>1||b>=2)&&(j=b),a):j},a.shape=function(c,d){return arguments.length?(("rect"==c||"circle"==c||"line"==c||"path"==c&&"string"==typeof d)&&(e=c,b=d),a):e},a.shapeWidth=function(b){return arguments.length?(f=+b,a):f},a.shapeHeight=function(b){return arguments.length?(g=+b,a):g},a.shapeRadius=function(b){return arguments.length?(h=+b,a):h},a.shapePadding=function(b){return arguments.length?(i=+b,a):i},a.labels=function(b){return arguments.length?(k=b,a):k},a.labelAlign=function(b){return arguments.length?("start"!=b&&"end"!=b&&"middle"!=b||(q=b),a):q},a.labelFormat=function(b){return arguments.length?(o=b,a):o},a.labelOffset=function(b){return arguments.length?(p=+b,a):p},a.labelDelimiter=function(b){return arguments.length?(r=b,a):r},a.useClass=function(b){return arguments.length?(b!==!0&&b!==!1||(m=b),a):m},a.orient=function(b){return arguments.length?(b=b.toLowerCase(),"horizontal"!=b&&"vertical"!=b||(s=b),a):s},a.ascending=function(b){return arguments.length?(t=!!b,a):t},a.classPrefix=function(b){return arguments.length?(l=b,a):l},a.title=function(b){return arguments.length?(n=b,a):n},d3.rebind(a,u,"on"),a}},{"./legend":2}],2:[function(a,b,c){b.exports={d3_identity:function(a){return a},d3_mergeLabels:function(a,b){if(0===b.length)return a;a=a?a:[];for(var c=b.length;c<a.length;c++)b.push(a[c]);return b},d3_linearLegend:function(a,b,c){var d=[];if(b.length>1)d=b;else for(var e=a.domain(),f=(e[e.length-1]-e[0])/(b-1),g=0;g<b;g++)d.push(e[0]+g*f);var h=d.map(c);return{data:d,labels:h,feature:function(b){return a(b)}}},d3_quantLegend:function(a,b,c){var d=a.range().map(function(d){var e=a.invertExtent(d);b(e[0]),b(e[1]);return b(e[0])+" "+c+" "+b(e[1])});return{data:a.range(),labels:d,feature:this.d3_identity}},d3_ordinalLegend:function(a){return{data:a.domain(),labels:a.domain(),feature:function(b){return a(b)}}},d3_drawShapes:function(a,b,c,d,e,f){"rect"===a?b.attr("height",c).attr("width",d):"circle"===a?b.attr("r",e):"line"===a?b.attr("x1",0).attr("x2",d).attr("y1",0).attr("y2",0):"path"===a&&b.attr("d",f)},d3_addText:function(a,b,c,d){b.append("text").attr("class",d+"label"),a.selectAll("g."+d+"cell text").data(c).text(this.d3_identity)},d3_calcType:function(a,b,c,d,e,f){var g=a.ticks?this.d3_linearLegend(a,c,e):a.invertExtent?this.d3_quantLegend(a,e,f):this.d3_ordinalLegend(a);return g.labels=this.d3_mergeLabels(g.labels,d),b&&(g.labels=this.d3_reverse(g.labels),g.data=this.d3_reverse(g.data)),g},d3_reverse:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[d-c-1];return b},d3_placement:function(a,b,c,d,e,f){b.attr("transform",c),d.attr("transform",e),"horizontal"===a&&d.style("text-anchor",f)},d3_addEvents:function(a,b){var c=this;a.on("mouseover.legend",function(a){c.d3_cellOver(b,a,this)}).on("mouseout.legend",function(a){c.d3_cellOut(b,a,this)}).on("click.legend",function(a){c.d3_cellClick(b,a,this)})},d3_cellOver:function(a,b,c){a.cellover.call(c,b)},d3_cellOut:function(a,b,c){a.cellout.call(c,b)},d3_cellClick:function(a,b,c){a.cellclick.call(c,b)},d3_title:function(a,b,c,d){if(""!==c){var e=a.selectAll("text."+d+"legendTitle");e.data([c]).enter().append("text").attr("class",d+"legendTitle"),a.selectAll("text."+d+"legendTitle").text(c);var f=a.select("."+d+"legendTitle").map(function(a){return a[0].getBBox().height})[0],g=-b.map(function(a){return a[0].getBBox().x})[0];b.attr("transform","translate("+g+","+(f+10)+")")}}}},{}],3:[function(a,b,c){var d=a("./legend");b.exports=function(){function a(a){var s=d.d3_calcType(c,q,h,i,l,o),t=a.selectAll("g").data([c]);t.enter().append("g").attr("class",j+"legendCells");var u=t.selectAll("."+j+"cell").data(s.data),v=u.enter().append("g",".cell").attr("class",j+"cell").style("opacity",1e-6);shapeEnter=v.append(e).attr("class",j+"swatch"),shapes=u.select("g."+j+"cell "+e),d.d3_addEvents(v,r),u.exit().transition().style("opacity",0).remove(),"line"===e?(d.d3_drawShapes(e,shapes,0,f),shapes.attr("stroke-width",s.feature)):d.d3_drawShapes(e,shapes,s.feature,s.feature,s.feature,b),d.d3_addText(t,v,s.labels,j);var w,x,y=u.select("text"),z=shapes[0].map(function(a,b){var d=a.getBBox(),f=c(s.data[b]);return"line"===e&&"horizontal"===p?d.height=d.height+f:"line"===e&&"vertical"===p&&(d.width=d.width),d}),A=d3.max(z,function(a){return a.height+a.y}),B=d3.max(z,function(a){return a.width+a.x}),C="start"==n?0:"middle"==n?.5:1;"vertical"===p?(w=function(a,b){var c=d3.sum(z.slice(0,b+1),function(a){return a.height});return"translate(0, "+(c+b*g)+")"},x=function(a,b){return"translate("+(B+m)+","+(z[b].y+z[b].height/2+5)+")"}):"horizontal"===p&&(w=function(a,b){var c=d3.sum(z.slice(0,b+1),function(a){return a.width});return"translate("+(c+b*g)+",0)"},x=function(a,b){return"translate("+(z[b].width*C+z[b].x)+","+(A+m)+")"}),d.d3_placement(p,u,w,y,x,n),d.d3_title(a,t,k,j),u.transition().style("opacity",1)}var b,c=d3.scale.linear(),e="rect",f=15,g=2,h=[5],i=[],j="",k="",l=d3.format(".01f"),m=10,n="middle",o="to",p="vertical",q=!1,r=d3.dispatch("cellover","cellout","cellclick");return a.scale=function(b){return arguments.length?(c=b,a):c},a.cells=function(b){return arguments.length?((b.length>1||b>=2)&&(h=b),a):h},a.shape=function(c,d){return arguments.length?("rect"!=c&&"circle"!=c&&"line"!=c||(e=c,b=d),a):e},a.shapeWidth=function(b){return arguments.length?(f=+b,a):f},a.shapePadding=function(b){return arguments.length?(g=+b,a):g},a.labels=function(b){return arguments.length?(i=b,a):i},a.labelAlign=function(b){return arguments.length?("start"!=b&&"end"!=b&&"middle"!=b||(n=b),a):n},a.labelFormat=function(b){return arguments.length?(l=b,a):l},a.labelOffset=function(b){return arguments.length?(m=+b,a):m},a.labelDelimiter=function(b){return arguments.length?(o=b,a):o},a.orient=function(b){return arguments.length?(b=b.toLowerCase(),"horizontal"!=b&&"vertical"!=b||(p=b),a):p},a.ascending=function(b){return arguments.length?(q=!!b,a):q},a.classPrefix=function(b){return arguments.length?(j=b,a):j},a.title=function(b){return arguments.length?(k=b,a):k},d3.rebind(a,r,"on"),a}},{"./legend":2}],4:[function(a,b,c){var d=a("./legend");b.exports=function(){function a(a){var t=d.d3_calcType(b,r,i,j,m,p),u=a.selectAll("g").data([b]);u.enter().append("g").attr("class",k+"legendCells");var v=u.selectAll("."+k+"cell").data(t.data),w=v.enter().append("g",".cell").attr("class",k+"cell").style("opacity",1e-6);shapeEnter=w.append(c).attr("class",k+"swatch"),shapes=v.select("g."+k+"cell "+c),d.d3_addEvents(w,s),v.exit().transition().style("opacity",0).remove(),d.d3_drawShapes(c,shapes,f,e,g,t.feature),d.d3_addText(u,w,t.labels,k);var x,y,z=v.select("text"),A=shapes[0].map(function(a){return a.getBBox()}),B=d3.max(A,function(a){return a.height}),C=d3.max(A,function(a){return a.width}),D="start"==n?0:"middle"==n?.5:1;"vertical"===q?(x=function(a,b){return"translate(0, "+b*(B+h)+")"},y=function(a,b){return"translate("+(C+o)+","+(A[b].y+A[b].height/2+5)+")"}):"horizontal"===q&&(x=function(a,b){return"translate("+b*(C+h)+",0)"},y=function(a,b){return"translate("+(A[b].width*D+A[b].x)+","+(B+o)+")"}),d.d3_placement(q,v,x,z,y,n),d.d3_title(a,u,l,k),v.transition().style("opacity",1)}var b=d3.scale.linear(),c="path",e=15,f=15,g=10,h=5,i=[5],j=[],k="",l="",m=d3.format(".01f"),n="middle",o=10,p="to",q="vertical",r=!1,s=d3.dispatch("cellover","cellout","cellclick");return a.scale=function(c){return arguments.length?(b=c,a):b},a.cells=function(b){return arguments.length?((b.length>1||b>=2)&&(i=b),a):i},a.shapePadding=function(b){return arguments.length?(h=+b,a):h},a.labels=function(b){return arguments.length?(j=b,a):j},a.labelAlign=function(b){return arguments.length?("start"!=b&&"end"!=b&&"middle"!=b||(n=b),a):n},a.labelFormat=function(b){return arguments.length?(m=b,a):m},a.labelOffset=function(b){return arguments.length?(o=+b,a):o},a.labelDelimiter=function(b){return arguments.length?(p=b,a):p},a.orient=function(b){return arguments.length?(b=b.toLowerCase(),"horizontal"!=b&&"vertical"!=b||(q=b),a):q},a.ascending=function(b){return arguments.length?(r=!!b,a):r},a.classPrefix=function(b){return arguments.length?(k=b,a):k},a.title=function(b){return arguments.length?(l=b,a):l},d3.rebind(a,s,"on"),a}},{"./legend":2}],5:[function(a,b,c){d3.legend={color:a("./color"),size:a("./size"),symbol:a("./symbol")}},{"./color":1,"./size":3,"./symbol":4}]},{},[5]),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.topojson={})}(this,function(a){"use strict";function b(){}function c(a){if(!a)return b;var c,d,e=a.scale[0],f=a.scale[1],g=a.translate[0],h=a.translate[1];return function(a,b){b||(c=d=0),a[0]=(c+=a[0])*e+g,a[1]=(d+=a[1])*f+h}}function d(a){if(!a)return b;var c,d,e=a.scale[0],f=a.scale[1],g=a.translate[0],h=a.translate[1];return function(a,b){b||(c=d=0);var i=(a[0]-g)/e|0,j=(a[1]-h)/f|0;a[0]=i-c,a[1]=j-d,c=i,d=j}}function e(a,b){for(var c,d=a.length,e=d-b;e<--d;)c=a[e],a[e++]=a[d],a[d]=c}function f(a,b){for(var c=0,d=a.length;c<d;){var e=c+d>>>1;a[e]<b?c=e+1:d=e}return c}function g(a,b){return"GeometryCollection"===b.type?{type:"FeatureCollection",features:b.geometries.map(function(b){return h(a,b)})}:h(a,b)}function h(a,b){var c={type:"Feature",id:b.id,properties:b.properties||{},geometry:i(a,b)};return null==b.id&&delete c.id,c}function i(a,b){function d(a,b){b.length&&b.pop();for(var c,d=l[a<0?~a:a],f=0,g=d.length;f<g;++f)b.push(c=d[f].slice()),k(c,f);a<0&&e(b,g)}function f(a){return a=a.slice(),k(a,0),a}function g(a){for(var b=[],c=0,e=a.length;c<e;++c)d(a[c],b);return b.length<2&&b.push(b[0].slice()),b}function h(a){for(var b=g(a);b.length<4;)b.push(b[0].slice());return b}function i(a){return a.map(h)}function j(a){var b=a.type;return"GeometryCollection"===b?{type:b,geometries:a.geometries.map(j)}:b in m?{type:b,coordinates:m[b](a)}:null}var k=c(a.transform),l=a.arcs,m={Point:function(a){return f(a.coordinates)},MultiPoint:function(a){return a.coordinates.map(f)},LineString:function(a){return g(a.arcs)},MultiLineString:function(a){return a.arcs.map(g)},Polygon:function(a){return i(a.arcs)},MultiPolygon:function(a){return a.arcs.map(i)}};return j(b)}function j(a,b){function c(b){var c,d=a.arcs[b<0?~b:b],e=d[0];return a.transform?(c=[0,0],d.forEach(function(a){c[0]+=a[0],c[1]+=a[1]})):c=d[d.length-1],b<0?[c,e]:[e,c]}function d(a,b){for(var c in a){var d=a[c];delete b[d.start],delete d.start,delete d.end,d.forEach(function(a){e[a<0?~a:a]=1}),h.push(d)}}var e={},f={},g={},h=[],i=-1;return b.forEach(function(c,d){var e,f=a.arcs[c<0?~c:c];f.length<3&&!f[1][0]&&!f[1][1]&&(e=b[++i],b[i]=c,b[d]=e)}),b.forEach(function(a){var b,d,e=c(a),h=e[0],i=e[1];if(b=g[h])if(delete g[b.end],b.push(a),b.end=i,d=f[i]){delete f[d.start];var j=d===b?b:b.concat(d);f[j.start=b.start]=g[j.end=d.end]=j}else f[b.start]=g[b.end]=b;else if(b=f[i])if(delete f[b.start],b.unshift(a),b.start=h,d=g[h]){delete g[d.end];var k=d===b?b:d.concat(b);f[k.start=d.start]=g[k.end=b.end]=k}else f[b.start]=g[b.end]=b;else b=[a],f[b.start=h]=g[b.end=i]=b}),d(g,f),d(f,g),b.forEach(function(a){e[a<0?~a:a]||h.push([a])}),h}function k(a){return i(a,l.apply(this,arguments))}function l(a,b,c){function d(a){var b=a<0?~a:a;(k[b]||(k[b]=[])).push({i:a,g:i})}function e(a){a.forEach(d)}function f(a){a.forEach(e)}function g(a){"GeometryCollection"===a.type?a.geometries.forEach(g):a.type in l&&(i=a,l[a.type](a.arcs))}var h=[];if(arguments.length>1){var i,k=[],l={LineString:e,MultiLineString:f,Polygon:f,MultiPolygon:function(a){a.forEach(f)}};g(b),k.forEach(arguments.length<3?function(a){h.push(a[0].i)}:function(a){c(a[0].g,a[a.length-1].g)&&h.push(a[0].i)})}else for(var m=0,n=a.arcs.length;m<n;++m)h.push(m);return{type:"MultiLineString",arcs:j(a,h)}}function m(a){var b=a[0],c=a[1],d=a[2];return Math.abs((b[0]-d[0])*(c[1]-b[1])-(b[0]-c[0])*(d[1]-b[1]))}function n(a){for(var b,c=-1,d=a.length,e=a[d-1],f=0;++c<d;)b=e,e=a[c],f+=b[0]*e[1]-b[1]*e[0];return f/2}function o(a){return i(a,p.apply(this,arguments))}function p(a,b){function c(a){a.forEach(function(b){b.forEach(function(b){(e[b=b<0?~b:b]||(e[b]=[])).push(a)})}),f.push(a)}function d(b){return n(i(a,{type:"Polygon",arcs:[b]}).coordinates[0])>0}var e={},f=[],g=[];return b.forEach(function(a){"Polygon"===a.type?c(a.arcs):"MultiPolygon"===a.type&&a.arcs.forEach(c)}),f.forEach(function(a){if(!a._){var b=[],c=[a];for(a._=1,g.push(b);a=c.pop();)b.push(a),a.forEach(function(a){a.forEach(function(a){e[a<0?~a:a].forEach(function(a){a._||(a._=1,c.push(a))})})})}}),f.forEach(function(a){delete a._}),{type:"MultiPolygon",arcs:g.map(function(b){var c,f=[];if(b.forEach(function(a){a.forEach(function(a){a.forEach(function(a){e[a<0?~a:a].length<2&&f.push(a)})})}),f=j(a,f),(c=f.length)>1)for(var g,h=d(b[0][0]),i=0;i<c;++i)if(h===d(f[i])){g=f[0],f[0]=f[i],f[i]=g;break}return f})}}function q(a){function b(a,b){a.forEach(function(a){a<0&&(a=~a);var c=e[a];c?c.push(b):e[a]=[b]})}function c(a,c){a.forEach(function(a){b(a,c)})}function d(a,b){"GeometryCollection"===a.type?a.geometries.forEach(function(a){d(a,b)}):a.type in h&&h[a.type](a.arcs,b)}var e={},g=a.map(function(){return[]}),h={LineString:b,MultiLineString:c,Polygon:c,MultiPolygon:function(a,b){a.forEach(function(a){c(a,b)})}};a.forEach(d);for(var i in e)for(var j=e[i],k=j.length,l=0;l<k;++l)for(var m=l+1;m<k;++m){var n,o=j[l],p=j[m];(n=g[o])[i=f(n,p)]!==p&&n.splice(i,0,p),(n=g[p])[i=f(n,o)]!==o&&n.splice(i,0,o)}return g}function r(a,b){return a[1][2]-b[1][2]}function s(){function a(a,b){for(;b>0;){var c=(b+1>>1)-1,e=d[c];if(r(a,e)>=0)break;d[e._=b]=e,d[a._=b=c]=a}}function b(a,b){for(;;){var c=b+1<<1,f=c-1,g=b,h=d[g];if(f<e&&r(d[f],h)<0&&(h=d[g=f]),c<e&&r(d[c],h)<0&&(h=d[g=c]),g===b)break;d[h._=b]=h,d[a._=b=g]=a}}var c={},d=[],e=0;return c.push=function(b){return a(d[b._=e]=b,e++),e},c.pop=function(){if(!(e<=0)){var a,c=d[0];return--e>0&&(a=d[e],b(d[a._=0]=a,0)),c}},c.remove=function(c){var f,g=c._;if(d[g]===c)return g!==--e&&(f=d[e],(r(f,c)<0?a:b)(d[f._=g]=f,g)),g},c}function t(a,b){function e(a){h.remove(a),a[1][2]=b(a),h.push(a)}var f=c(a.transform),g=d(a.transform),h=s();return b||(b=m),a.arcs.forEach(function(a){var c,d,i,j,k=[],l=0;for(d=0,i=a.length;d<i;++d)j=a[d],f(a[d]=[j[0],j[1],1/0],d);for(d=1,i=a.length-1;d<i;++d)c=a.slice(d-1,d+2),c[1][2]=b(c),k.push(c),h.push(c);for(d=0,i=k.length;d<i;++d)c=k[d],c.previous=k[d-1],c.next=k[d+1];for(;c=h.pop();){var m=c.previous,n=c.next;c[1][2]<l?c[1][2]=l:l=c[1][2],m&&(m.next=n,m[2]=c[2],e(m)),n&&(n.previous=m,n[0]=c[0],e(n))}a.forEach(g)}),a}var u="1.6.24";a.version=u,a.mesh=k,a.meshArcs=l,a.merge=o,a.mergeArcs=p,a.feature=g,a.neighbors=q,a.presimplify=t}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b(a.d3_queue=a.d3_queue||{})}(this,function(a){"use strict";function b(a){if(!(a>=1))throw new Error;this._size=a,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function c(a){if(!a._start)try{d(a)}catch(b){a._tasks[a._ended+a._active-1]&&f(a,b)}}function d(a){for(;a._start=a._waiting&&a._active<a._size;){var b=a._ended+a._active,c=a._tasks[b],d=c.length-1,f=c[d];c[d]=e(a,b),--a._waiting,++a._active,c=f.apply(null,c),a._tasks[b]&&(a._tasks[b]=c||k)}}function e(a,b){return function(d,e){a._tasks[b]&&(--a._active,++a._ended,a._tasks[b]=null,null==a._error&&(null!=d?f(a,d):(a._data[b]=e,a._waiting?c(a):g(a))))}}function f(a,b){var c,d=a._tasks.length;for(a._error=b,a._data=void 0,a._waiting=NaN;--d>=0;)if((c=a._tasks[d])&&(a._tasks[d]=null,c.abort))try{c.abort()}catch(b){}a._active=NaN,g(a)}function g(a){!a._active&&a._call&&a._call(a._error,a._data)}function h(a){return new b(arguments.length?+a:1/0)}var i="2.0.3",j=[].slice,k={};b.prototype=h.prototype={constructor:b,defer:function(a){if("function"!=typeof a||this._call)throw new Error;if(null!=this._error)return this;var b=j.call(arguments,1);return b.push(a),++this._waiting,this._tasks.push(b),c(this),this},abort:function(){return null==this._error&&f(this,new Error("abort")),this},await:function(a){if("function"!=typeof a||this._call)throw new Error;return this._call=function(b,c){a.apply(null,[b].concat(c))},g(this),this},awaitAll:function(a){if("function"!=typeof a||this._call)throw new Error;return this._call=a,g(this),this}},a.version=i,a.queue=h}),function(a){var b=/iPhone/i,c=/iPod/i,d=/iPad/i,e=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,f=/Android/i,g=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,h=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,i=/IEMobile/i,j=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,k=/BlackBerry/i,l=/BB10/i,m=/Opera Mini/i,n=/(CriOS|Chrome)(?=.*\bMobile\b)/i,o=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,p=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),q=function(a,b){return a.test(b)},r=function(a){var r=a||navigator.userAgent,s=r.split("[FBAN");if("undefined"!=typeof s[1]&&(r=s[0]),s=r.split("Twitter"),"undefined"!=typeof s[1]&&(r=s[0]),this.apple={phone:q(b,r),ipod:q(c,r),tablet:!q(b,r)&&q(d,r),device:q(b,r)||q(c,r)||q(d,r)},this.amazon={phone:q(g,r),tablet:!q(g,r)&&q(h,r),device:q(g,r)||q(h,r)},this.android={phone:q(g,r)||q(e,r),tablet:!q(g,r)&&!q(e,r)&&(q(h,r)||q(f,r)),device:q(g,r)||q(h,r)||q(e,r)||q(f,r)},this.windows={phone:q(i,r),tablet:q(j,r),device:q(i,r)||q(j,r)},this.other={blackberry:q(k,r),blackberry10:q(l,r),opera:q(m,r),firefox:q(o,r),chrome:q(n,r),device:q(k,r)||q(l,r)||q(m,r)||q(o,r)||q(n,r)},this.seven_inch=q(p,r),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},s=function(){var a=new r;return a.Class=r,a};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=r:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=s():"function"==typeof define&&define.amd?define("isMobile",[],a.isMobile=s()):a.isMobile=s()}(this);